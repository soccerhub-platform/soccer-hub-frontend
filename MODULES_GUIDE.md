# Руководство по модулям

Этот документ поможет разработчикам быстро разобраться с модульной структурой фронтенда Football CRM и начать работу над новым функционалом.

## Быстрый старт

1. **Установка зависимостей**: установите необходимые пакеты командой `npm install`. Для запуска в режиме разработки выполните `npm run dev`. Приложение будет доступно по адресу `http://localhost:3000`.
2. **Страница входа**: в зависимости от роли используйте `http://localhost:3000/dispatcher/login` или `http://localhost:3000/admin/login`. В демонстрационной версии логин любого пользователя, начинающегося с `admin`, даст роль администратора.
3. **Навигация**: после входа доступна навигация по защищенным маршрутам. У диспетчера – панель, клиенты и пробные тренировки. У администратора – панель, контракты, платежи и пользователи.

## Пример кода: создание защищённого маршрута

Чтобы добавить новый защищенный маршрут в модуль диспетчера:

```tsx
// src/modules/dispatcher/index.tsx
<Route element={<ProtectedRoute role="DISPATCHER" redirectTo="/dispatcher/login" />}>  
  <Route element={<DispatcherLayout />}>
    {/* Новый маршрут */}
    <Route path="reports" element={<ReportsPage />} />
  </Route>
</Route>
```

Компонент `ReportsPage` будет отображаться внутри layout, если пользователь авторизован и имеет роль диспетчера.

## Часто задаваемые вопросы

**Как добавить новую роль?**

1. Добавьте значение в тип `Role` в `src/shared/AuthContext.tsx`.
2. Реализуйте модуль в `src/modules/<role>/` со своей страницей входа, layout и маршрутами.
3. Укажите новое значение роли при вызове `login` в `AuthContext`, если это необходимо.
4. Обновите маршруты в `App.tsx`.

**Можно ли использовать глобальный state?**

Для данных, зависящих от сервера, рекомендуется использовать React Query. Так как в этом примере сервер не доступен, таблицы заполняются статическими данными. В реальной интеграции замените статические массивы вызовами API через `src/shared/api.ts`.

**Где хранятся стили?**

Стилизация реализована через Tailwind CSS. Базовые цвета для диспетчера и администратора определены в `tailwind.config.js`. Дополнительные правила можно описывать в `index.css` или использовать классы Tailwind прямо в JSX.

## Команды

- `npm install` – установка зависимостей.
- `npm run dev` – запуск в режиме разработки.
- `npm run build` – сборка проекта для продакшена.
- `npm run preview` – просмотр собранного продакшен‑бандла.
